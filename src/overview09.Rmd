---
title: "Overview of Module 9: Using conversion functions and conditional expressions"
author: "Suman Sahil, Steve Simon"
output:
  html_document: default
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding,
  output_dir = "../results", output_format = "all") })  
---

This file was created on 2020-07-14 and last modified on `r Sys.Date()`.

```{r setup, echo=FALSE}
knitr::opts_chunk$set(echo = FALSE)
suppressMessages(suppressWarnings(library(knitr)))
suppressMessages(suppressWarnings(library(magrittr)))
suppressMessages(suppressWarnings(library(sqldf)))
git <- "https://github.com/pmean/introduction-to-sql/blob/master/"
pan <- "https://umkc.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id="
```

### Objectives

+ In this module you will learn about
  + Implicit and Explicit Conversions
  + Manipulating dates
  + Conditional Expressions

### SQL keywords

+ Here are the SQL keywords introduced in this module:
  + case
  + coalesce
  + decode
  + greatest
  + in
  + least
  + to_char
  + to_date
  + to_number
  
### Videos and handouts

+ Video09a. Conversion functions (16 minutes)
  + Available in [Panopto format](`r pan`69c3af9b-5856-4364-81d8-aad3014c7ec8)
  + Slides, available in [pdf format](`r git`results/video09a.pdf)
+ Video09b. Conversion functions (13 minutes)
  + Available in [Panopto format](`r pan`1a04e3b6-59d1-4fa3-81dc-aad3016c7e48)
  + Slides, see above

### Datasets used in this module

This page provides a bit more details about the database used in this module. Please note that there might be small inconsistencies between the Oracle version and the SQLite version of the data.

The encounter and hospital tables are used in the homework.

+ Encounter
  + Data dictionary.  Available in [text format](`r git`data/encounter-data-dictionary.txt)
  + Oracle: no download needed
  + SQLite: download this file. Available in [binary format](`r git`data/encounter.sqlite).
  + You should not need it, but there is a backup of this data available in [CSV format](`r git`data/encounter.csv).

+ Hospital
  + Data dictionary.  Available in [text format](`r git`data/hospital-data-dictionary.txt)
  + Oracle: no download needed
  + SQLite: download this file. Available in [binary format](`r git`data/hospital.sqlite).
  + You should not need it, but there is a backup of this data available in [CSV format](`r git`data/hospital.csv).

### Discussion09a: One minute feedback

Graded: 3 points, one point deduction if submitted after deadline

Review the videos in this module and briefly answer the following questions

+ What was the most important thing that you learned?
+ What concept(s) do you still find confusing?
+ What would you like to learn next?

Please keep your answers brief. You are welcome to say something generic like "I found nothing confusing" or "I found everything confusing" or "I agree with the previous comment."

### Homework09a: 

+ Graded: 3 points, one point deduction if submitted late.
+ Use Encounter Table
  + Use case expression to classify age <= 20 as ‘Group 1’, and age > 20 as ‘Group 2’ 
+ Use hospital table
  + Use coalesce function to return -1 for null values of teaching_ind in hospital table where census_reg = ‘West’
+ Place the SQL code and the results of all your queries in a single PDF file.

### Quiz09

+ Graded: 3 points, one point deduction if submitted late.

1. What would the output of "select coalesce(null,'1') from dual"
  + Null
  + Error
  + 1
  + 0
   
2. The maximum number of arguments in a CASE expression is 
  + 250
  + 255
  + 1
  + 0
   
3. What date format should be used? (Fill in the blank).
  + SELECT TO_DATE('1999 05 20',   ____________) from dual;
    + 'MM DD YYYY'
    + 'YYYY/MM/DD'
    + 'MM/DD/YYYY'
    + 'YYYY MM DD'
    
4. Which SQL functions are capable of typecasting column value, literal or an expression? (Multiple answers are possible)
  + DECODE
  + CASE
  + TO_CHAR
  + TO_DATE
  
5. What is the output of following query?
  + SELECT DECODE(1, 2, 'One','Not one') FROM dual;
    + Not one
    + One
    + 1
    + 2
